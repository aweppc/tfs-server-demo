# Демка с 4 лекции ТФШ

## Как запустить локально

Через 3 терминала, для нагляндности
- yarn start:webpack:client - запуск вебпака с дев-сервером, отвечающим за клиентскую статику
- yarn start:webpack:server - запуск вебпака, отвечающего за нодовое приложение
- yarn start:server - запуск самого сервера

## Где искать в браузере

http://localhost:3000/

## Как собрать в докер-контейнер

- yarn build - каждый этап сборки разбит на отдельные команды.

## Как запустить собранный контейнер

- docker run --name tfs-demo --rm -d -p 3000:3000 tfs-demo-2-server:latest

### Что всё это значит

- docker run - команда запуска контейнера
- --name tfs-demo - просто даём название контейнеру, чтобы можно было указывать его в командах, например stop или logs - без этого нужно будет указывать id контейнера
- --rm - удаляем контейнер после остановки. Если этого не указать, то после остановки контейнер будет все ещё доступен, полезно для дебага
- -d - запускаем контейнер как демон, то есть без привязки к текущему процессу (терминалу) и в фоне
- -p - проброс порта 3000 из контейнера в порт 3000 на хосте. У каждого контейнера свои порты, которые никак не связаны с портами локальной машины, с помощью этого как раз связываем порт 3000 в контейнере с портом 3000 на локальной машине - все запросы на 3000 порт на локальной машине пойдут в порт 3000 в контейнере
- tfs-demo-2-server:latest - какой образ будет запущен в контейнере. Именно этот образ и собирается командой docker build

## Как остановить запущенный контейнер

- docker stop tfs-demo

## Как смотреть логи контейнера

- docker logs -f tfs-demo